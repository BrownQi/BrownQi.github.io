<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8" />

<meta name="generator" content="Hexo 3.9.0" />

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

<title>4-Oracle - BrownQi&#39;s Notes</title>


    <meta name="description" content="4-oracle">
<meta property="og:type" content="article">
<meta property="og:title" content="4-Oracle">
<meta property="og:url" content="http://yoursite.com/2019/10/11/4-Oralce/index.html">
<meta property="og:site_name" content="BrownQi&#39;s Notes">
<meta property="og:description" content="4-oracle">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://yoursite.com/images/og_image.png">
<meta property="og:updated_time" content="2019-10-10T20:22:48.417Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="4-Oracle">
<meta name="twitter:description" content="4-oracle">
<meta name="twitter:image" content="http://yoursite.com/images/og_image.png">







<link rel="icon" href="/images/BrownQi.png">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
<style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">

    
    
    
    
<link rel="stylesheet" href="/css/back-to-top.css">

    
    
    
    
    
    
    
    <link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
    
    <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/title.png" alt="4-Oracle" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
<div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-10-10T20:22:46.000Z">2019-10-11</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    1 小时 读完 (大约 12155 个字)
                </span>
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">0</span>次访问
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                4-Oracle
            
        </h1>
        <div class="content">
            <p>4-oracle</p>
<a id="more"></a>
<p>[TOC]</p>
<h1 id="1-数据字典-了解"><a href="#1-数据字典-了解" class="headerlink" title="1.数据字典[了解]"></a>1.数据字典[了解]</h1><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/*</span></span><br><span class="line"><span class="hljs-comment">	了解</span></span><br><span class="line"><span class="hljs-comment">	1.什么是数据字典</span></span><br><span class="line"><span class="hljs-comment">	数据字典是Oracle存放有关数据库信息的地方，其用途是用来描述数据的（数据的数据：元数据）.比如一个表的创建者信息，创建时间信息，所属表空间信息，用户访问权限信息等.</span></span><br><span class="line"><span class="hljs-comment">	</span></span><br><span class="line"><span class="hljs-comment">	2.数据字典分类</span></span><br><span class="line"><span class="hljs-comment">		1）静态数据字典</span></span><br><span class="line"><span class="hljs-comment">			主要是在用户访问数据字典时不会发生改变的，主要由表和视图组成</span></span><br><span class="line"><span class="hljs-comment">			注意：数据字典中的表是不能直接被访问的，但是可以访问数据字典中的视图</span></span><br><span class="line"><span class="hljs-comment">			静态数据字典中的视图分为三类，它们分别由三个前缀够成：user_*、 all_*、 dba_*</span></span><br><span class="line"><span class="hljs-comment">			①user_* </span></span><br><span class="line"><span class="hljs-comment">			该视图存储了关于当前用户所拥有的对象的信息。（即所有在该用户模式下的对象）</span></span><br><span class="line"><span class="hljs-comment">		　　②all_*</span></span><br><span class="line"><span class="hljs-comment">　　　　	该试图存储了当前用户能够访问的对象的信息。（与user_*相比，all_* 并不需要拥有该对象，只需要具有访问该			对象的权限即可）</span></span><br><span class="line"><span class="hljs-comment">		　　③dba_*</span></span><br><span class="line"><span class="hljs-comment">　　　　	该视图存储了数据库中所有对象的信息。（前提是当前用户具有访问这些数据库的权限，一般来说必须具有管理员权				限）</span></span><br><span class="line"><span class="hljs-comment">		2）动态数据字典</span></span><br><span class="line"><span class="hljs-comment">			它依赖数据库运行的性能，反映数据库运行的一些内在信息。Oracle包含了一些潜在的由系统管理员如SYS维护的表和视图，由于当数据库运行的时候它们会不断进行更新，所以称它们为动态数据字典（或者是动态性能视图）</span></span><br><span class="line"><span class="hljs-comment">			Oracle中这些动态性能视图都是以v$开头的视图，比如v$access</span></span><br><span class="line"><span class="hljs-comment">		</span></span><br><span class="line"><span class="hljs-comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="1-1-查询某用户下所有的表"><a href="#1-1-查询某用户下所有的表" class="headerlink" title="1.1 查询某用户下所有的表"></a>1.1 查询某用户下所有的表</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">select</span> table_name <span class="hljs-keyword">from</span> all_tables <span class="hljs-keyword">where</span> owner=<span class="hljs-string">'scott'</span></span><br></pre></td></tr></table></figure>

<h2 id="1-2-查询EMP表中所有的字段"><a href="#1-2-查询EMP表中所有的字段" class="headerlink" title="1.2 查询EMP表中所有的字段"></a>1.2 查询EMP表中所有的字段</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> all_tab_columns <span class="hljs-keyword">where</span> table_name=<span class="hljs-string">'EMP'</span></span><br></pre></td></tr></table></figure>

<h2 id="1-3-列出表的索引列"><a href="#1-3-列出表的索引列" class="headerlink" title="1.3 列出表的索引列"></a>1.3 列出表的索引列</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> sys.all_ind_columns <span class="hljs-keyword">where</span> table_name=<span class="hljs-string">'EMP'</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-列出表中约束"><a href="#1-4-列出表中约束" class="headerlink" title="1.4 列出表中约束"></a>1.4 列出表中约束</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> all_constraints <span class="hljs-keyword">where</span> table_name=<span class="hljs-string">'EMP'</span></span><br></pre></td></tr></table></figure>

<h2 id="1-5-在-oracle-中描述数据字典视图"><a href="#1-5-在-oracle-中描述数据字典视图" class="headerlink" title="1.5 在 oracle 中描述数据字典视图"></a>1.5 在 oracle 中描述数据字典视图</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">select</span> table_name ,comments <span class="hljs-keyword">from</span> dictionary <span class="hljs-keyword">where</span> table_name <span class="hljs-keyword">like</span> <span class="hljs-string">'%TABLE%'</span>;</span><br></pre></td></tr></table></figure>

<h1 id="2-Oracle-数据类型【重点】"><a href="#2-Oracle-数据类型【重点】" class="headerlink" title="2.Oracle 数据类型【重点】"></a>2.Oracle 数据类型【重点】</h1><table>
<thead>
<tr>
<th>类型</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>CHAR(length)</td>
<td>存储固定长度的字符串。参数 length 指定了长度，如果存储的字符串长度小于 length，用空格填充。默认长度是 1，最长不超过 2000 字节。</td>
</tr>
<tr>
<td><strong>VARCHAR2(length)</strong></td>
<td>存储可变长度的字符串。length 指定了该字符串的最大长度。默认长度是 1，最长不超过 4000 字符。</td>
</tr>
<tr>
<td><strong>NUMBER(p，s)</strong></td>
<td>既可以存储浮点数，也可以存储整数，p 表示数字的最大位数（如果是小数包括整数部分和小数部分和小数点，p 默认是 38 位），s 是指小数位数。</td>
</tr>
<tr>
<td><strong>DATE</strong></td>
<td>存储日期和时间，存储纪元、4 位年、月、日、时、分、秒，存储时间从公元前 4712 年 1 月 1 日到公元后 4712 年 12 月 31 日。</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>不但存储日期的年月日，时分秒，以及秒后 6 位，同时包含时区。</td>
</tr>
<tr>
<td>CLOB</td>
<td>存储大的文本，比如存储非结构化的 XML 文档</td>
</tr>
<tr>
<td>BLOB</td>
<td>存储二进制对象，如图形、视频、声音等。</td>
</tr>
</tbody></table>
<h1 id="3-Oracle-体系结构-DBA，了解"><a href="#3-Oracle-体系结构-DBA，了解" class="headerlink" title="3.Oracle 体系结构(DBA，了解)"></a>3.Oracle 体系结构(DBA，了解)</h1><p>一系列物理文件（数据文件，控制文件，联机日志等）的集合或与之对应的逻辑结构（表空间，段等）被称为数据库 </p>
<p>物理存储结构：数据文件、重做日志文件、控制文件<br>desc v$logfile;<br>select member from v$logfile;<br>v$controlfile;<br>v$datafile;<br>逻辑存储结构：表空间、段、区、块 </p>
<p><strong>创建表空间</strong></p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">tablespace</span> <span class="hljs-keyword">user_data</span> </span><br><span class="line"><span class="hljs-keyword">datafile</span> <span class="hljs-string">'D:\oracle\oradata\user_data.dbf'</span> </span><br><span class="line"><span class="hljs-keyword">size</span> <span class="hljs-number">50</span>m </span><br><span class="line"><span class="hljs-keyword">autoextend</span> <span class="hljs-keyword">on</span>                  <span class="hljs-comment">/*autoextend on    表空间大小不够用时自动扩展*/</span></span><br><span class="line"><span class="hljs-keyword">next</span> <span class="hljs-number">50</span>m <span class="hljs-keyword">maxsize</span> <span class="hljs-number">20480</span>m 　　　　<span class="hljs-comment">/*next 50m 自动扩展增量为50MB */</span></span><br><span class="line"><span class="hljs-keyword">extent</span> <span class="hljs-keyword">management</span> <span class="hljs-keyword">local</span>;　　　　<span class="hljs-comment">/*extent management local   代表管理方式为本地*/</span></span><br></pre></td></tr></table></figure>

<pre><code>所谓本地化管理，就是指Oracle不再利用数据字典表来记录Oracle表空间里面的区的使用状况，而是在每个表空间的数据文件的头部加入了一个位图区，在其中记录每个区的使用状况。每当一个区被使用，或者被释放以供重新使用时，Oracle都会更新数据文件头部的这个记录，反映这个变化。</code></pre><p><strong>创建临时表空间</strong></p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">temporary</span> <span class="hljs-keyword">tablespace</span> user_temp </span><br><span class="line">tempfile <span class="hljs-string">'D:\oracle\oradata\user_temp.dbf'</span> </span><br><span class="line"><span class="hljs-keyword">size</span> <span class="hljs-number">50</span>m </span><br><span class="line"><span class="hljs-keyword">autoextend</span> <span class="hljs-keyword">on</span> </span><br><span class="line"><span class="hljs-keyword">next</span> <span class="hljs-number">50</span>m <span class="hljs-keyword">maxsize</span> <span class="hljs-number">20480</span>m </span><br><span class="line"><span class="hljs-keyword">extent</span> <span class="hljs-keyword">management</span> <span class="hljs-keyword">local</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">/*</span></span><br><span class="line"><span class="hljs-comment">  1.表分区:把表中数据划分成若干部分，并存储在不同的位置，垂直拆分</span></span><br><span class="line"><span class="hljs-comment">	针对表的字段特别多，一张表来维护的话，比较困难，通常需要垂直拆分</span></span><br><span class="line"><span class="hljs-comment">	</span></span><br><span class="line"><span class="hljs-comment">	水平拆分：采用分库策略，针对单表的数据量比较大的时候，需要进行水平拆分 ，字典：A-H、I-k.....</span></span><br><span class="line"><span class="hljs-comment">  2.优点</span></span><br><span class="line"><span class="hljs-comment">      改善查询性能</span></span><br><span class="line"><span class="hljs-comment">      表更容易管理</span></span><br><span class="line"><span class="hljs-comment">      便于备份和恢复</span></span><br><span class="line"><span class="hljs-comment">      提高数据安全性</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">  3.表分区分类</span></span><br><span class="line"><span class="hljs-comment">      范围分区：列值的范围作为划分条件</span></span><br><span class="line"><span class="hljs-comment">      散列分区：列的hash值自动分配</span></span><br><span class="line"><span class="hljs-comment">      列表分区：列值必须明确指定，一个分区列</span></span><br><span class="line"><span class="hljs-comment">  	  复合分区：先按第一分区方法分区、再按第二分区方法划分子分区</span></span><br><span class="line"><span class="hljs-comment">  	  其他分区</span></span><br><span class="line"><span class="hljs-comment">*/</span></span><br><span class="line"><span class="hljs-comment">-- 范围分区</span></span><br><span class="line"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> SALES1</span><br><span class="line">(</span><br><span class="line">   SALES_ID <span class="hljs-built_in">NUMBER</span>,</span><br><span class="line">   PRODUCT_ID VARCHAR2(<span class="hljs-number">5</span>),</span><br><span class="line">   SALES_DATE <span class="hljs-built_in">DATE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,</span><br><span class="line">   SALES_COST <span class="hljs-built_in">NUMBER</span>(<span class="hljs-number">10</span>),</span><br><span class="line">   AREACODE  VARCHAR2(<span class="hljs-number">5</span>)</span><br><span class="line">)</span><br><span class="line"><span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> (SALES_DATE)</span><br><span class="line">(</span><br><span class="line">   <span class="hljs-keyword">PARTITION</span> P1 <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">LESS</span> <span class="hljs-keyword">THAN</span>  (<span class="hljs-keyword">to_date</span>(<span class="hljs-string">'2013-04-1'</span>, <span class="hljs-string">'yyyy-mm-dd'</span>)),</span><br><span class="line">   <span class="hljs-keyword">PARTITION</span> P2 <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">LESS</span> <span class="hljs-keyword">THAN</span> (<span class="hljs-keyword">to_date</span>(<span class="hljs-string">'2013-07-1'</span>, <span class="hljs-string">'yyyy-mm-dd'</span>)),</span><br><span class="line">   <span class="hljs-keyword">PARTITION</span> P3 <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">LESS</span> <span class="hljs-keyword">THAN</span> (<span class="hljs-keyword">to_date</span>(<span class="hljs-string">'2013-10-1'</span>, <span class="hljs-string">'yyyy-mm-dd'</span>)),</span><br><span class="line">   <span class="hljs-keyword">PARTITION</span> P4 <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">LESS</span> <span class="hljs-keyword">THAN</span> (<span class="hljs-keyword">to_date</span>(<span class="hljs-string">'2014-01-1'</span>, <span class="hljs-string">'yyyy-mm-dd'</span>)),</span><br><span class="line">   <span class="hljs-keyword">partition</span> P5 <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">LESS</span> <span class="hljs-keyword">THAN</span> (maxvalue)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> SALES1 <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>,<span class="hljs-string">'P1'</span>,<span class="hljs-keyword">to_date</span>(<span class="hljs-string">'2013-04-1'</span>, <span class="hljs-string">'yyyy-mm-dd'</span>),<span class="hljs-number">10</span>,<span class="hljs-string">'025'</span>);</span><br><span class="line"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> SALES1 <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>,<span class="hljs-string">'P2'</span>,<span class="hljs-keyword">to_date</span>(<span class="hljs-string">'2015-01-1'</span>, <span class="hljs-string">'yyyy-mm-dd'</span>),<span class="hljs-number">10</span>,<span class="hljs-string">'025'</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> SALES1 <span class="hljs-keyword">partition</span>(P1);</span><br><span class="line"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> SALES1 <span class="hljs-keyword">partition</span>(P2);</span><br><span class="line"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> SALES1 <span class="hljs-keyword">partition</span>(P3);</span><br><span class="line"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> SALES1 <span class="hljs-keyword">partition</span>(P4);</span><br><span class="line"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> SALES1 <span class="hljs-keyword">partition</span>(P5);</span><br></pre></td></tr></table></figure>

<h2 id="3-1-表空间"><a href="#3-1-表空间" class="headerlink" title="3.1 表空间"></a>3.1 表空间</h2><p>​    在数据库系统中，存储空间是较为重要的资源，合理利用空间，不但能节省空间，还可以提高系统的效率和工作性能。Oracle 可以存放海量数据，所有数据都在数据文件中存储。而数据文件大小受操作系统限制，并且过大的数据文件对数据的存取性能影响非常大。同时Oracle 是跨平台的数据库，Oracle 数据可以轻松的在不同平台上移植，那么如何才能<strong>提供统一存取格式的大容量</strong>呢？Oracle 采用<strong>表空间</strong>来解决。 </p>
<p>​    表空间只是一个逻辑概念，若干操作系统文件（文件可以不是很大）可以组成一个表空间。表空间统一管理空间中的数据文件，一个数据文件只能属于一个表空间。一个数据库空间由若干个表空间组成。如图所示：</p>
<p><img src="https://raw.githubusercontent.com/36956271/imgs/master/20190706201458.png" alt></p>
<h2 id="3-2-表数据的存储方式"><a href="#3-2-表数据的存储方式" class="headerlink" title="3.2 表数据的存储方式"></a>3.2 表数据的存储方式</h2><p><img src="https://raw.githubusercontent.com/36956271/imgs/master/20190706201629.png" alt></p>
<p> <strong>1、表空间</strong></p>
<p>​    表空间是  oracle 数据库最大的逻辑存储单元，数据库的大小从逻辑上看就是由表空间决定的，所有表空间大小的和就是数据库的大小。在 oracle 数据库中，存储结构管理主要就是通过对表空间的管理啊来实现的。表空间与数据库文件直接关联，一个表空间包含一个或多个数据文件，一个数据文件只能从属于一个表空间，数据库对象就是存储在表空间对应的 一个或多个数据文件中。</p>
<p>​    表空间根据存储数据类型的不同，分为系统表空间和非系统表空间两类。</p>
<p>​    <strong>系统表空间：</strong>主要存放数据库的系统信息，如数据字典、数据库对象定义信息，数据库组件信息等。</p>
<p>​    <strong>非系统表空间：</strong>又分为撤销表空间、临时表空间和用户表空间等。其中撤销表空间用于自动管理数据库的回退信息，临时表空间用于管理数据库的临时信息。用户表空间用于存储业务数据。</p>
<p><strong>2、段</strong></p>
<p>​    段是由一个或多个连续或不连续的区组成的逻辑存储单元，用于存储特定的、具有独立存储结构的数据库对象。根据存储对象类型不同，分为：<strong>表段、索引段、临时段和回退段4类。</strong></p>
<p>​    <strong>表段</strong>：又称数据段，用来存储表或簇的数据，可以细分为普通表段、分区表段、簇段、索引化表段</p>
<p>​    <strong>索引段</strong>：用来存放索引数据，包括 ROWID 和索引值</p>
<p>​    <strong>临时段</strong>：是进行查询、排序等操作时，如果内存空间不足，用于保存 sql 语句在解释和执行过程中产生的临时数据。会话结束时，为该操作分配的临时段将被释放。</p>
<p>​    <strong>回退段</strong>：用于保存数据库的回退信息，包含当前未提交事务所修改的数据的原始版本。利用回退段中保存的回退信息，可以实现事务回滚、数据库恢复、数据的读一致性和闪回查询。</p>
<p><strong>3、区</strong>（一张表可以存放于一个或多个区）</p>
<pre><code>区是由一系列连续的数据块构成的逻辑存储单元，是存储空间分配的最小单元。当创建一个数据库对象时，oracle 为对象分配若干个区。以构成 一个段来为对象提供初始的存储空间。当段中已分配的区都写满后，oracle 会为段分配一个新区，以容纳更多的数据。构成一个段的所有区只能是在个文件中。oracle 数据库中，引入区的目的是为了提高系统存储空间分配的效率，以区为单位的存储空间分配大大减少了磁盘分配的次数。</code></pre><p><strong>4、块</strong></p>
<p>​    oracle 数据块是数据库中最小的逻辑存储单元，是数据库执行输入、输出操作的最小单位，由一个或多个操作系统块构成。在oracle 11g 数据库中，数据块分为 标准块和非标准块两种，其中标准块由数据库初始化参数 DB_BLOCK_SIZE  设置，其大小不可更改。oracle  数据库的默认数据缓冲区就是标准数据块构成的。</p>
<h2 id="3-3-数据库：块"><a href="#3-3-数据库：块" class="headerlink" title="3.3 数据库：块"></a>3.3 数据库：块</h2><p><img src="https://raw.githubusercontent.com/36956271/imgs/master/20190706201940.png" alt></p>
<h2 id="3-4-数据库实例"><a href="#3-4-数据库实例" class="headerlink" title="3.4 数据库实例"></a>3.4 数据库实例</h2><p>ORACLE 内存结构和后台进程被成为数据库的实例 </p>
<p><img src="https://raw.githubusercontent.com/36956271/imgs/master/20190706203706.png" alt></p>
<p>(1)SGA：SystemGlobal Area是OracleInstance的基本组成部分，在实例启动时分配;系统全局域SGA主要由三部分构成：共享池、数据缓冲区、日志缓冲区。</p>
<p>(2)共享池：Shared Pool用于缓存最近被执行的SQL语句和最近被使用的数据定义，主要包括：Librarycache（共享SQL区）和Datadictionarycache（数据字典缓冲区）。 共享SQL区是存放用户SQL命令的区域，数据字典缓冲区存放数据库运行的动态信息。</p>
<p>(3)缓冲区高速缓存：DatabaseBufferCache用于缓存从数据文件中检索出来的数据块，可以大大提高查询和更新数据的性能。</p>
<p>(4)大型池：Large Pool是SGA中一个可选的内存区域，它只用于shared server环境。</p>
<p>(5)Java池：Java Pool为Java命令的语法分析提供服务。</p>
<p>(6)PGA：ProcessGlobal Area是为每个连接到Oracledatabase的用户进程保留的内存。</p>
<h1 id="4-DDL【重点，实操】"><a href="#4-DDL【重点，实操】" class="headerlink" title="4.DDL【重点，实操】"></a>4.DDL【重点，实操】</h1><h2 id="4-1-创建表"><a href="#4-1-创建表" class="headerlink" title="4.1 创建表"></a>4.1 创建表</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> student(</span><br><span class="line"><span class="hljs-keyword">sid</span> <span class="hljs-built_in">number</span>(<span class="hljs-number">10</span>),</span><br><span class="line">sname varchar2(<span class="hljs-number">10</span>)</span><br><span class="line">) <span class="hljs-keyword">tablespace</span> tt;</span><br></pre></td></tr></table></figure>

<p><strong>tablespace不是必须的</strong>，如果没有指定tablespace则使用登陆用户使用的表空间上！</p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 使用子查询创建表</span></span><br><span class="line"><span class="hljs-comment">-- emp所有数据</span></span><br><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--10号部门的emp数据</span></span><br><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp3 <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> deptno=<span class="hljs-number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--emp表结构:只要我们as后面的查询没有数据即可，即where条件的结果为false,通常我们可能使用1=2</span></span><br><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> emp4 <span class="hljs-keyword">as</span> <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> emp <span class="hljs-keyword">where</span> <span class="hljs-number">1</span>=<span class="hljs-number">2</span>;</span><br></pre></td></tr></table></figure>

<h2 id="4-2-添加字段"><a href="#4-2-添加字段" class="headerlink" title="4.2 添加字段"></a>4.2 添加字段</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">--为student添加age字段 number(5)</span></span><br><span class="line"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">add</span> age <span class="hljs-built_in">number</span>(<span class="hljs-number">2</span>);</span><br></pre></td></tr></table></figure>

<h2 id="4-3-修改字段"><a href="#4-3-修改字段" class="headerlink" title="4.3 修改字段"></a>4.3 修改字段</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 修改age字段 number(10)</span></span><br><span class="line"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">modify</span> age <span class="hljs-built_in">number</span>(<span class="hljs-number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">-- 修改字段名称 age --&gt; age2</span></span><br><span class="line"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">rename</span> <span class="hljs-keyword">column</span> age <span class="hljs-keyword">to</span> age2;</span><br></pre></td></tr></table></figure>

<h2 id="4-4-删除字段"><a href="#4-4-删除字段" class="headerlink" title="4.4 删除字段"></a>4.4 删除字段</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">--删除student的age2字段</span></span><br><span class="line"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> emp2 <span class="hljs-keyword">drop</span> <span class="hljs-keyword">column</span> age2;</span><br></pre></td></tr></table></figure>

<h2 id="4-5-清空表数据"><a href="#4-5-清空表数据" class="headerlink" title="4.5 清空表数据"></a>4.5 清空表数据</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">--情况student表数据,truncate vs delete</span></span><br><span class="line"><span class="hljs-keyword">truncate</span> <span class="hljs-keyword">table</span> emp3;</span><br></pre></td></tr></table></figure>

<p>正常情况下删除数据，如果发现删除错了，则可以通过 rollback 回滚。如果使用了截断表，则表示所有的数据不可恢复了。所以速度很快 。</p>
<h2 id="4-6-删除表"><a href="#4-6-删除表" class="headerlink" title="4.6 删除表"></a>4.6 删除表</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 删除student表</span></span><br><span class="line"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> emp3;</span><br></pre></td></tr></table></figure>

<h2 id="4-7-重命名表"><a href="#4-7-重命名表" class="headerlink" title="4.7 重命名表"></a>4.7 重命名表</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 重命名student --&gt;student2</span></span><br><span class="line"><span class="hljs-keyword">rename</span> emp2 <span class="hljs-keyword">to</span> emp4</span><br></pre></td></tr></table></figure>

<h1 id="5-事务"><a href="#5-事务" class="headerlink" title="5.事务"></a>5.事务</h1><p>事务提交：commit</p>
<p>事务回滚：rollback</p>
<p>设置保存点：savepoint  a</p>
<p>​    在 oracle 中每个连接都会产生一个 session,一个 session 对数据库的修改，不会立刻反映到数据库的真实数据上，是允许回滚的。只有当提交了，才变成持久数据了。</p>
<p>可能出现死锁的情况</p>
<p>原子性（Atomicity）</p>
<p>一致性（Consistency）</p>
<p>隔离性（Isolation ）</p>
<p>持久性（Durability ）</p>
<p><strong>原子性和一致性的差别？</strong></p>
<p><strong>原子性：</strong></p>
<p>​    只一个事务中，包含若干个数据操作，这些操作是一个整体，要么一起完成，要么一起不完成，不能只完成其中的一部。比如你去银行转帐，从一个账户转帐到另一个账户，这是一个完整的事务，包括两个操作，从你第一个账户读数， 增加到第二个账户，并减去第一个账户中的钱，如果这些操作有一个失败了，整个事务都必须还原成最开始的状态。</p>
<p><strong>一致性：</strong></p>
<p>​    是指数据库从一个完整的状态跳到另一个完整的状态，是用于保护数据库的完整性的。比如你修改数据库的某个外键值，如果没有和相应的主键对应，就违反了数据库的一致性。另外，还有读一致性，如：你刚写入一个数到数据库中，但还没有提交，这时候有人要读这个数，就涉及完整性问题，要保证读取的数据在整个数据库中是处于和其他数据一致的一个状态。 </p>
<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 1.scott 下面创建一个表【emp1、empno number(10)、ename varchar2(50)】</span></span><br><span class="line"><span class="hljs-comment">-- 2.添加一个字段【sal number(10,2)】</span></span><br><span class="line"><span class="hljs-comment">-- 3.修改字段 【ename varchar(100)】</span></span><br><span class="line"><span class="hljs-comment">-- 4.删除字段 【sal】</span></span><br><span class="line"><span class="hljs-comment">-- 5.把表 emp1 改成 emp2</span></span><br><span class="line"><span class="hljs-comment">-- 6.删除表 emp2</span></span><br><span class="line"><span class="hljs-comment">-- 7.创建一个和 emp 结构一样的表，并同时插入工资大于 1000 的数据</span></span><br><span class="line"><span class="hljs-comment">-- 8.清空表数据（用 truncate)</span></span><br></pre></td></tr></table></figure>

<h1 id="6-DML-改变数据结构）"><a href="#6-DML-改变数据结构）" class="headerlink" title="6.DML(改变数据结构）"></a>6.DML(改变数据结构）</h1><h2 id="6-1-insert-语句"><a href="#6-1-insert-语句" class="headerlink" title="6.1 insert 语句"></a>6.1 insert 语句</h2><p>表间数据拷贝 </p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 向dept1中插入dept表的数据</span></span><br><span class="line"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> dept (deptno,dname,loc) <span class="hljs-keyword">values</span>(<span class="hljs-number">50</span>,<span class="hljs-string">'研发部'</span>,<span class="hljs-string">'南京'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="6-2-update-语句"><a href="#6-2-update-语句" class="headerlink" title="6.2 update 语句"></a>6.2 update 语句</h2><p>将编号为 7779 用户的工作换成编号为 7566 的雇员的工作和所属上级。 </p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">update</span> dept <span class="hljs-keyword">set</span> dname=<span class="hljs-string">'测试部'</span>,loc=<span class="hljs-string">'帝都'</span> <span class="hljs-keyword">where</span> deptno=<span class="hljs-number">50</span></span><br><span class="line"><span class="hljs-comment">--注意：若不加条件，则全部数据都会变更，所以我们的修改都是带条件的</span></span><br></pre></td></tr></table></figure>

<h2 id="6-3-delete-语句"><a href="#6-3-delete-语句" class="headerlink" title="6.3 delete 语句"></a>6.3 delete 语句</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">--从emp2表中删除empno&gt;7369的员工</span></span><br><span class="line"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> dept <span class="hljs-keyword">where</span> deptno=<span class="hljs-number">50</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--删除所有员工</span></span><br><span class="line"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> emp4;  <span class="hljs-comment">--不用，即便我们需要清空数据，我们通常使用truncate</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--truncate vs delete？--基础面试题</span></span><br><span class="line">1.效率而言，<span class="hljs-keyword">truncate</span>高于<span class="hljs-keyword">delete</span>，<span class="hljs-keyword">truncate</span>过程大体如下：先<span class="hljs-keyword">drop</span>掉某个表，然后在创建一个空结构；而<span class="hljs-keyword">delete</span>逐条删除数据</span><br><span class="line"><span class="hljs-number">2.</span>跟事务相关：<span class="hljs-keyword">delete</span>，可以<span class="hljs-keyword">rollback</span> 回滚。如果使用了截断表，则表示所有的数据不可恢复了。所以速度很快 。</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--实际中，我们连delete都不怎么用？</span></span><br><span class="line"><span class="hljs-comment">--实际中，我们通过设置一个标记字段，通过改变标记字段的值，来标识该条数据是否被删除。即实际删除做的是update操作</span></span><br></pre></td></tr></table></figure>

<h1 id="7-练习"><a href="#7-练习" class="headerlink" title="7.练习"></a>7.练习</h1><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 1.往 emp 表中插入 empno,ename,sal 数据（111,'1',1000)(222,'2',2000)</span></span><br><span class="line"><span class="hljs-comment">-- 2.把 empno=111 的员工 comm 改成 100</span></span><br><span class="line"><span class="hljs-comment">-- 3.往 dept 表中插入 dept 表中 deptno=100 的数据</span></span><br><span class="line"><span class="hljs-comment">-- 4.删除 empno=111 的数据</span></span><br><span class="line"><span class="hljs-comment">-- 5.为所有人长工资，标准是： 10 部门长 10%； 20 部门长 15%； 30 部门长 20%其他部门长18%（要求用 DECODE 函数）</span></span><br><span class="line"><span class="hljs-comment">-- 6.根据工作年限长工资，标准是：为公司工作了几个月就长几个百分点。</span></span><br></pre></td></tr></table></figure>

<h1 id="8-约束（完整性）"><a href="#8-约束（完整性）" class="headerlink" title="8.约束（完整性）"></a>8.约束（完整性）</h1><p>​    <a href="http://blog.itpub.net/29785807/viewspace-1271431/" target="_blank" rel="noopener">http://blog.itpub.net/29785807/viewspace-1271431/</a> </p>
<p>约束就是指对插入数据的各种限制，例如：人员的姓名不能为空，人的年龄只能在 0~150 岁之间。约束可以对数据库中的数据进行保护。约束可以在建表的时候直接声明，也可以为已建好的表添加约束。 </p>
<h2 id="8-1-NOT-NULL：非空约束"><a href="#8-1-NOT-NULL：非空约束" class="headerlink" title="8.1 NOT NULL：非空约束"></a>8.1 NOT NULL：非空约束</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">--方式1：建表的同时创建约束</span></span><br><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t1(<span class="hljs-keyword">id</span> <span class="hljs-built_in">number</span>,<span class="hljs-keyword">name</span> varchar2(<span class="hljs-number">20</span>) <span class="hljs-keyword">constraint</span> nn_t1_id <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span>); </span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--方式2：建表后，添加约束</span></span><br><span class="line"> <span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> t1 <span class="hljs-keyword">modify</span> <span class="hljs-built_in">number</span> <span class="hljs-keyword">constraint</span> nn_t1_id <span class="hljs-keyword">not</span> <span class="hljs-literal">null</span>;</span><br></pre></td></tr></table></figure>

<h2 id="8-2-PRIMARY-KEY：主键约束"><a href="#8-2-PRIMARY-KEY：主键约束" class="headerlink" title="8.2 PRIMARY KEY：主键约束"></a>8.2 PRIMARY KEY：主键约束</h2><p>不能重复，不能为空 </p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t1(<span class="hljs-keyword">id</span> <span class="hljs-built_in">number</span>,qq <span class="hljs-built_in">number</span>,<span class="hljs-keyword">constraint</span> pk_t1_id primary <span class="hljs-keyword">key</span>(<span class="hljs-keyword">id</span>)); </span><br><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t1(<span class="hljs-keyword">id</span> <span class="hljs-built_in">number</span> primary <span class="hljs-keyword">key</span>,qq <span class="hljs-built_in">number</span>); </span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> t1 <span class="hljs-keyword">add</span> <span class="hljs-keyword">constraint</span> pk_t1_id primary <span class="hljs-keyword">key</span>(<span class="hljs-keyword">id</span>);</span><br></pre></td></tr></table></figure>

<h2 id="8-3-UNIQUE：唯一约束，值不能重复（空值除外）"><a href="#8-3-UNIQUE：唯一约束，值不能重复（空值除外）" class="headerlink" title="8.3 UNIQUE：唯一约束，值不能重复（空值除外）"></a>8.3 UNIQUE：唯一约束，值不能重复（空值除外）</h2><figure class="highlight hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">方法一： </span><br><span class="line">SQL&gt; create table t1(id number,qq number,constraint un_t1_qq unique(qq)); </span><br><span class="line">方法二： </span><br><span class="line">SQL&gt; alter table t1 add constraint un_t1_qq unique(qq);</span><br></pre></td></tr></table></figure>

<h2 id="8-4-CHECK：条件约束，插入的数据必须满足某些条件"><a href="#8-4-CHECK：条件约束，插入的数据必须满足某些条件" class="headerlink" title="8.4 CHECK：条件约束，插入的数据必须满足某些条件"></a>8.4 CHECK：条件约束，插入的数据必须满足某些条件</h2><figure class="highlight hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">方法一： </span><br><span class="line">SQL&gt; create table t3(id number,sal number,constraint ck_t3_sal check(sal between 5000 and 50000)); </span><br><span class="line">方法二： </span><br><span class="line">SQL&gt; alter table t3 add constraint ck_t3_sal check(sal&gt;5000);</span><br></pre></td></tr></table></figure>

<h2 id="8-5-Foreign-Key：外键"><a href="#8-5-Foreign-Key：外键" class="headerlink" title="8.5 Foreign Key：外键"></a>8.5 Foreign Key：外键</h2><figure class="highlight hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">方法一： </span><br><span class="line">SQL&gt; create table t2(id number,cc number,constraint fk_t2_id foreign key(id) references t1(id)); </span><br><span class="line">方法二： </span><br><span class="line">SQL&gt; alter table t1 add constraint pk_t2_id foreign key(id) references t1(id);</span><br></pre></td></tr></table></figure>

<h2 id="8-6-级联删除"><a href="#8-6-级联删除" class="headerlink" title="8.6 级联删除"></a>8.6 级联删除</h2><p>在建立外键的时候必须指定级联删除（ON DELETE CASCADE）。 </p>
<h2 id="8-7-使用-alter-命令为表添加约束"><a href="#8-7-使用-alter-命令为表添加约束" class="headerlink" title="8.7 使用 alter 命令为表添加约束"></a>8.7 使用 alter 命令为表添加约束</h2><h2 id="8-8-删除约束"><a href="#8-8-删除约束" class="headerlink" title="8.8 删除约束"></a>8.8 删除约束</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">当删除特定表的主键约束时，如果该表具有相关的从表，那么在删除主键约束时必须带有CASCAED选项 </span><br><span class="line">语法：</span><br><span class="line"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">CONSTRAINT</span> constraint_name |PRIMARY <span class="hljs-keyword">KEY</span></span><br></pre></td></tr></table></figure>

<h2 id="8-9-启用约束"><a href="#8-9-启用约束" class="headerlink" title="8.9 启用约束"></a>8.9 启用约束</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">ENABLE</span> <span class="hljs-keyword">CONSTRAINT</span> constraint_name;</span><br></pre></td></tr></table></figure>

<h2 id="8-10-禁用约束"><a href="#8-10-禁用约束" class="headerlink" title="8.10 禁用约束"></a>8.10 禁用约束</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">--禁止约束指使约束临时失效。当禁止了约束之后，约束规则将不再生效。在使用SQL*LOADER或INSERT装载数据之前，为了加快数据装载速度，应该首先禁止约束，然后装载数据。</span></span><br><span class="line"></span><br><span class="line">语法： </span><br><span class="line"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">DISABLE</span> <span class="hljs-keyword">CONSTRAINT</span> constaint_name [CASCAED];<span class="hljs-comment">--CASCAED用于指定级联禁止从表的外部键</span></span><br></pre></td></tr></table></figure>

<h1 id="9-练习"><a href="#9-练习" class="headerlink" title="9.练习"></a>9.练习</h1><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 1.创建一张表 student</span></span><br><span class="line"><span class="hljs-comment">-- id number</span></span><br><span class="line"><span class="hljs-comment">-- name varchar2(10)</span></span><br><span class="line"><span class="hljs-comment">-- age number(10)</span></span><br><span class="line"><span class="hljs-comment">-- tel varchar2（10）</span></span><br><span class="line"><span class="hljs-comment">-- 给 id 字段添加主键约束</span></span><br><span class="line"><span class="hljs-comment">-- 给 name 字段添加非空约束</span></span><br><span class="line"><span class="hljs-comment">-- 给 age 字段添加 check 约束（age 必须大于 18 岁)</span></span><br><span class="line"><span class="hljs-comment">-- 给 tel 添加唯一 非空 约束</span></span><br><span class="line"><span class="hljs-comment">-- 2.创建一张学员兴趣爱好表 hobby</span></span><br><span class="line"><span class="hljs-comment">-- id number(10)</span></span><br><span class="line"><span class="hljs-comment">-- hobby_namevarchar2(10)</span></span><br><span class="line"><span class="hljs-comment">-- sidnumber --学生 id</span></span><br><span class="line"><span class="hljs-comment">-- 给 sid 字段添加外键约束，并且要带级联删除</span></span><br><span class="line"><span class="hljs-comment">-- 3.删除掉 student 表中 tel 字段的唯一约束（先写出查看该表约束的 sql)</span></span><br><span class="line"><span class="hljs-comment">-- 4.手动添加 student 表中 tel 字段的唯一约束（约束名为： MY_CONSTRAINT_1)</span></span><br><span class="line"><span class="hljs-comment">-- 5.禁用约束 MY_CONSTRAINT_1</span></span><br><span class="line"><span class="hljs-comment">-- 6.启用约束 MY_CONSTRAINT_1</span></span><br></pre></td></tr></table></figure>

<h1 id="10-视图"><a href="#10-视图" class="headerlink" title="10.视图"></a>10.视图</h1><p>*<em>视图：是一个封装了各种复杂查询的语句，就称为视图。 *</em></p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/*</span></span><br><span class="line"><span class="hljs-comment">	视图 *****</span></span><br><span class="line"><span class="hljs-comment">	1.什么是视图？</span></span><br><span class="line"><span class="hljs-comment">		①视图是一种虚表</span></span><br><span class="line"><span class="hljs-comment">		②视图建立在已有表的基础上，视图赖以建立的这些表称为基表</span></span><br><span class="line"><span class="hljs-comment">		③向视图中提供数据内容的语句为select语句，可以将视图理解为存储起来的select语句</span></span><br><span class="line"><span class="hljs-comment">		④视图是向用户提供基表数据的另一种表现形式</span></span><br><span class="line"><span class="hljs-comment">		⑤视图没有存储真正的数据，真正的数据还是存储在基表中</span></span><br><span class="line"><span class="hljs-comment">		⑥开发人员虽然操作的是视图，但最终视图还会转为操作基表</span></span><br><span class="line"><span class="hljs-comment">		⑦一个基表可以有0个或多个视图</span></span><br><span class="line"><span class="hljs-comment">	</span></span><br><span class="line"><span class="hljs-comment">	2.什么时候使用视图？</span></span><br><span class="line"><span class="hljs-comment">		①如果不想让用户看到所有数据（字段、记录），只想让用户看到某些数据的时候，此时可以使用视图</span></span><br><span class="line"><span class="hljs-comment">		②当需要简化sql查询语句的编写时，可以使用视图，但不提高查询效率</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">	3.视图应用领域</span></span><br><span class="line"><span class="hljs-comment">		银行、电信、金融、证券军事等不便让用户知道所有数据的项目中</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">	4.视图的作用</span></span><br><span class="line"><span class="hljs-comment">		①限制数据访问，隐藏数据的安全性</span></span><br><span class="line"><span class="hljs-comment">		②简化复杂查询</span></span><br><span class="line"><span class="hljs-comment">		③提供数据的相互独立</span></span><br><span class="line"><span class="hljs-comment">		④同样的数据，可以有不同的显示方式</span></span><br><span class="line"><span class="hljs-comment">		⑤经常可以用来做报表</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">	5.视图常见问题</span></span><br><span class="line"><span class="hljs-comment">		删除视图中的【某条】记录会影响基表吗？会影响基表</span></span><br><span class="line"><span class="hljs-comment">		将【整个】视图删除，会影响表吗？不会影响基表</span></span><br><span class="line"><span class="hljs-comment">		删除视图，会进入回收站吗？不会进入回收站</span></span><br><span class="line"><span class="hljs-comment">		删除基表会影响视图吗？会影响视图</span></span><br><span class="line"><span class="hljs-comment">		闪回基表后,视图有影响吗？视图又可以正常工作了</span></span><br><span class="line"><span class="hljs-comment">		</span></span><br><span class="line"><span class="hljs-comment">        将emp表丢入回收站，drop table 表名</span></span><br><span class="line"><span class="hljs-comment">        drop table emp;</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">        从回收站将emp表闪回，flashback table 表名 to before drop</span></span><br><span class="line"><span class="hljs-comment">        flashback table emp to before drop;</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">        查询回收站，show recyclebin</span></span><br><span class="line"><span class="hljs-comment">        show recyclebin;</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">        清空回收站，purge recyclebin</span></span><br><span class="line"><span class="hljs-comment">        purge recyclebin;</span></span><br><span class="line"><span class="hljs-comment">    </span></span><br><span class="line"><span class="hljs-comment">    6.视图和表的区别</span></span><br><span class="line"><span class="hljs-comment">    	1.视图是已经编译好了的sql，表不是</span></span><br><span class="line"><span class="hljs-comment">        2.视图没有实际的物理存储记录，表有</span></span><br><span class="line"><span class="hljs-comment">        3.视图是逻辑概念，表可以进行修改</span></span><br><span class="line"><span class="hljs-comment">        5.表是内模式，视图是外模式</span></span><br><span class="line"><span class="hljs-comment">        6.视图是我们查看表的方法，视图不让用户接触数据表，用户也就不知道表结构</span></span><br><span class="line"><span class="hljs-comment">        7.表属于全局模式中的表，是实表，视图属于局部模式的表，是虚表。</span></span><br><span class="line"><span class="hljs-comment">        8.视图建立、删除只影响视图本身，不影响表</span></span><br><span class="line"><span class="hljs-comment">        PS：可以通过视图修改表的数据，单不建议使用</span></span><br><span class="line"><span class="hljs-comment">	</span></span><br><span class="line"><span class="hljs-comment">*/</span></span><br><span class="line"><span class="hljs-comment">--1.基于emp表所有列，创建视图emp_view_1，create view 视图名 as select对一张或多张基表的查询</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--默认情况下，普通用户无权创建视图，得让sysdba为你分配creare view的权限 </span></span><br><span class="line"><span class="hljs-comment">--以sysdba身份，授权scott用户create view权限</span></span><br><span class="line">先使用scott账户连接，然后切换账户</span><br><span class="line">SQL&gt; conn system/as sysdba;</span><br><span class="line">输入口令: ****</span><br><span class="line">已连接。</span><br><span class="line">SQL&gt; show user;</span><br><span class="line">USER 为 "SYS"</span><br><span class="line">SQL&gt; </span><br><span class="line"></span><br><span class="line">sqlplus登录：用户名:system 密码:orcl</span><br><span class="line"><span class="hljs-keyword">grant</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> <span class="hljs-keyword">to</span> scott;</span><br><span class="line"><span class="hljs-comment">--以sysdba身份，撤销scott用户create view权限</span></span><br><span class="line"><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> <span class="hljs-keyword">from</span> scott;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--2.基于emp表指定列，创建视图emp_view_2，该视图包含编号/姓名/工资/年薪/年收入（查询中使用列别名）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--3.基于emp表指定列，创建视图emp_view_3(a,b,c,d,e)，包含编号/姓名/工资/年薪/年收入（视图中使用列名）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--查询emp_view_3创建视图的结构</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--4.修改emp_view_3(id,name,salary,annual,income)视图，create or replace view 视图名 as 子查询</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--5.创建视图emp_view_4，视图中包含各部门的最低工资，最高工资，平均工资</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--6.创建视图emp_view_5，视图中包含员工编号，姓名，工资，部门名，工资等级</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--7.删除视图emp_view_1中的7788号员工的记录，使用delete操作，会影响基表吗？</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--8.修改emp_view_1为只读视图【with read only】，再执行上述delete操作，还行吗？</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--9.分页sql视图</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--员工名字、员工所属部门</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--报表</span></span><br></pre></td></tr></table></figure>

<h1 id="11-索引"><a href="#11-索引" class="headerlink" title="11.索引"></a>11.索引</h1><p>select * from user_indexes 查询现有的索引<br>select * from user_ind_columns 可获知索引建立在那些字段上 </p>
<h2 id="11-1-什么是索引"><a href="#11-1-什么是索引" class="headerlink" title="11.1 什么是索引"></a>11.1 什么是索引</h2><ol>
<li>一种用于提升查询效率的数据库对象；</li>
<li>通过快速定位数据的方法，减少磁盘的I/O；</li>
<li>索引信息与表独立存放；</li>
<li>Oracle数据库自动使用和维护索引；</li>
</ol>
<h2 id="11-2-索引的分类"><a href="#11-2-索引的分类" class="headerlink" title="11.2 索引的分类"></a>11.2 索引的分类</h2><ul>
<li>唯一索引</li>
<li>非唯一索引</li>
</ul>
<h2 id="11-3-创建索引的两种方式"><a href="#11-3-创建索引的两种方式" class="headerlink" title="11.3 创建索引的两种方式"></a>11.3 创建索引的两种方式</h2><ul>
<li>手动创建：用户可以在其他列上创建唯一索引，以加速查询；</li>
<li>自动创建：在定义主键或唯一约束时，系统会自动在相应的字段上添加唯一索引；</li>
</ul>
<h2 id="11-4-索引优缺点"><a href="#11-4-索引优缺点" class="headerlink" title="11.4 索引优缺点"></a>11.4 索引优缺点</h2><p><strong>建立索引的优点</strong><br>1.大大加快数据的检索速度;</p>
<p>2.创建唯一性索引，保证数据库表中每一行数据的唯一性;</p>
<p>3.加速表和表之间的连接;</p>
<p>4.在使用分组和排序子句进行数据检索时，可以显著减少查询中分组和排序的时间。</p>
<p><strong>索引的缺点</strong></p>
<p>1.索引需要占物理空间。</p>
<p>2.当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，降低了数据的维护速度。 </p>
<h2 id="11-5-创建索引的原则"><a href="#11-5-创建索引的原则" class="headerlink" title="11.5 创建索引的原则"></a>11.5 创建索引的原则</h2><p>创建索引：创建索引一般有以下两个目的：维护被索引列的唯一性和提供快速访问表中数据的策略。</p>
<p>–在 select 操作占大部分的表上创建索引；</p>
<p>–在 where 子句中出现最频繁的列上创建索引；</p>
<p>–在选择性高的列上创建索引（补充索引选择性，最高是 1， eg： primary key）</p>
<p>–复合索引的主列应该是最有选择性的和 where 限定条件最常用的列，并以此类推第二列……。 </p>
<p>–小于 5M 的表，最好不要使用索引来查询，表越小，越适合用全表扫描。 </p>
<h2 id="11-6-使用索引的原则"><a href="#11-6-使用索引的原则" class="headerlink" title="11.6 使用索引的原则"></a>11.6 使用索引的原则</h2><p>–查询结果是所有数据行的 5%以下时，使用 index 查询效果最好；</p>
<p>–where 条件中经常用到表的多列时，使用复合索引效果会好于几个单列索引。因为当 sql语句所查询的列，全部都出现在复合索引中时，此时由于 Oracle 只需要查询索引块即可获得所有数据，当然比使用多个单列索引要快得多；</p>
<p>–索引利于 select，但对经常 insert， delte 尤其 update 的表，会降低效率。</p>
<p>eg：试比较下面两条 SQL 语句(emp 表的 deptno 列上建有 ununique index)：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语句 A：</span><br><span class="line"></span><br><span class="line"> SELECT dname, deptno FROM dept WHERE deptno NOT IN (SELECT deptno FROM emp);</span><br><span class="line">语句 B：</span><br><span class="line"></span><br><span class="line"> SELECT dname, deptno FROM dept WHERE NOT EXISTS (SELECT deptno FROM emp WHERE dept.deptno = emp.deptno);</span><br></pre></td></tr></table></figure>

<p>​    <strong>这两条查询语句实现的结果是相同的，但是执行语句 A 的时候， ORACLE 会对整个 emp 表进行扫描，没有使用建立在 emp 表上的 deptno 索引，执行语句 B 的时候，由于在子查询中使用了联合查询， ORACLE 只是对 emp 表进行的部分数据扫描，并利用了 deptno 列的索引，所以语句 B 的效率要比语句 A 的效率高。</strong></p>
<p>–where 子句中的这个字段，必须是复合索引的第一个字段；</p>
<p>eg：一个索引是按 f1, f2, f3 的次序建立的，若 where 子句是 f2 = : var2, 则因为 f2 不是索引的第 1 个字段，无法使用该索引。</p>
<p>—- where 子句中的这个字段，不应该参与任何形式的计算：任何对列的操作都将导致表扫描，它包括数据库函数、计算表达式等等，查询时要尽可能将操作移至等号右边。</p>
<p>—-应尽量熟悉各种操作符对 Oracle 是否使用索引的影响：以下这些操作会显式（ explicitly）地阻止 Oracle 使用索引： is null ; is not null ; not in; !=; like ;numeric_col+0;date_col+0; char_col||’ ‘; to_char; to_number， to_date 等。</p>
<p>Eg：Select jobid from mytabs where isReq=’0’ and to_date (updatedate) &gt;= to_Date ( ‘2001-7-18’,’YYYY-MM-DD’)；</p>
<p>–updatedate 列的索引也不会生效。 </p>
<h2 id="11-7-创建索引"><a href="#11-7-创建索引" class="headerlink" title="11.7 创建索引"></a>11.7 创建索引</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">index</span> abc <span class="hljs-keyword">on</span> student(<span class="hljs-keyword">sid</span>,sname);</span><br><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">index</span> abc1 <span class="hljs-keyword">on</span> student(sname,<span class="hljs-keyword">sid</span>);</span><br></pre></td></tr></table></figure>

<p>这两种索引方式是不一样的；</p>
<p>索引 abc 对 Select * from student where sid=1; 这样的查询语句更有效；</p>
<p>索引 abc1 对 Select * from student where sname=‟louis‟; 这样的查询语句更有效；</p>
<p>因此建立索引的时候，字段的组合顺序是非常重要的。一般情况下，需要经常访问的字段放在组合字段的前面 ；</p>
<h2 id="11-8-索引的存储"><a href="#11-8-索引的存储" class="headerlink" title="11.8 索引的存储"></a>11.8 索引的存储</h2><p>​    索引和表都是独立存在的。在为索引指定表空间的时候，不要将被索引的表和索引指向同一个表空间，这样可以避免产生 IO 冲突。使 Oracle 能够并行访问存放在不同硬盘中的索引数据和表数据，更好的提高查询速度。 </p>
<h2 id="11-9-删除索引"><a href="#11-9-删除索引" class="headerlink" title="11.9 删除索引"></a>11.9 删除索引</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> idx_emp_ename_ning</span><br></pre></td></tr></table></figure>

<h2 id="11-10-索引类型"><a href="#11-10-索引类型" class="headerlink" title="11.10 索引类型"></a>11.10 索引类型</h2><p><strong>B 树索引（B-Tree Index）</strong></p>
<p>创建索引的默认类型，结构是一颗树，采用的是平衡 B 树算法：</p>
<ul>
<li>右子树节点的键值大于等于父节点的键值</li>
<li>左子树节点的键值小于等于父节点的键值</li>
</ul>
<p>比如有数据:100,101,102,103,104,105,106 </p>
<p><img src="https://raw.githubusercontent.com/36956271/imgs/master/20190706212730.png" alt></p>
<p><strong>位图索引(BitMap Index)</strong></p>
<p>​    如果表中的某些字段取值范围比较小，比如职员性别、分数列 ABC 级等。只有两个值。这样的字段如果建 B 树索引没有意义，不能提高检索速度。这时我们推荐用位图索引Create BitMap Index student on(sex); </p>
<h2 id="11-11-管理索引"><a href="#11-11-管理索引" class="headerlink" title="11.11 管理索引"></a>11.11 管理索引</h2><p>1） 先插入数据后创建索引向表中插入大量数据之前最好不要先创建索引，因为如果先建立索引。那么在插入每行<br>数据的时候都要更改索引。这样会大大降低插入数据的速度。</p>
<p>2） 设置合理的索引列顺序</p>
<p>3） 限制每个表索引的数量</p>
<p>4） 删除不必要的索引</p>
<p>5） 为每个索引指定表空间</p>
<p>6） 经常做 insert， delete 尤其是 update 的表最好定期 exp/imp 表数据，整理数据，降低碎 片（缺点：要停应用，以保持数据一致性，不实用）；有索引的最好定期 rebuild 索引（rebuild期间只允许表的 select 操作，可在数据库较空闲时间提交），以降低索引碎片，提高效率 </p>
<h2 id="11-12-索引问题"><a href="#11-12-索引问题" class="headerlink" title="11.12 索引问题"></a>11.12 索引问题</h2><p>1： 针对一个表的查询语句能否会用到两个索引?</p>
<p>2：如果能用到，那么其实现原理是怎样的？</p>
<p>3：效率如何？其代价如何，比如额外开销等。 </p>
<p>回答： </p>
<p>1.一个表的查询语句可以同时用到两个索引。如下图： </p>
<p><img src="https://raw.githubusercontent.com/36956271/imgs/master/20190706213115.png" alt></p>
<p>2.索引是以独立于表存在的一种数据库对象，它是对基表的一种排序（默认是 B 树索引就是二叉树的排序方式），比如：<br>t 表(x,y,z) ,在 x,y,z 上分别都建立了索引(index1,index2,index3)，那在查询 select * from t where x=1 and y=2;的时候，会分别用到 index1,index2。原理是先到 index1 索引表中查到符合 x=1 条件的记录，然后到 index2 索引表中查到 y=2 条件的记录。</p>
<p>3.这样的查询效率，肯定是大于没有索引情况的全表扫描（table access full)，但是有两个问题。</p>
<p>问题一：建立索引将占用额外的数据库空间，更重要的是增删改操作的时候，索引的排序也必须改变，加大的维护的成本</p>
<p>问题二：如果经常查询 x=?和 y=?，那推荐使用组合 index(x,y)，这种情况下组合索引的效率是远高于两个单独的索引的。</p>
<p>同时在用组合索引的时候，大家一定要注意一个细节：建立组合索引 index(x,y,z)的时候，那在查询条中出现 x,xy,xyz都是可以用到该组合索引，但是 y,yz,z 是不能用到该索引的。关于这段话的原文如下：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">A leading portion of an index is a set of one or more columns that were specified first and consecutively in the list of columns in the CREATE INDEX statement that created the index. Consider this CREATE INDEX statement:</span><br><span class="line"></span><br><span class="line">CREATE INDEX comp_ind ON table1(x, y, z);</span><br><span class="line"></span><br><span class="line">x, xy, and xyz combinations of columns are leading portions of the index</span><br><span class="line"></span><br><span class="line">yz, y, and z combinations of columns are not leading portions of the index</span><br></pre></td></tr></table></figure>

<h1 id="12-SQL-优化【面试】"><a href="#12-SQL-优化【面试】" class="headerlink" title="12. SQL 优化【面试】"></a>12. SQL 优化【面试】</h1><p>​    SQL 优化的实质就是在结果正确的前提下，用优化器可以识别的语句， 充份利用索引，执行过程中访问尽量少的数据块，减少表扫描的 I/O 次数，尽量避免全表扫描和其他额外开销。</p>
<p>​    oracle 数据库常用的两种优化器： RBO（rule-based-optimizer）和 CBO(cost-based-optimizer)。目前更多地采用 CBO(cost-based-optimizer)基于开销的优化器。在 CBO 方式下， Oracle 会根据表及索引的状态信息来选择计划；RBO 方式下， Oracle 会根据自己内部设置的一些 规则来决定选择计划，例如 oracle 会根据以下优先级来选择执行计划（越靠前， rank 越低，越快）。</p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">为什么要Oracle优化：</span><br><span class="line">       随着实际项目的启动，Oracle经过一段时间的运行，最初的Oracle设置，会与实际Oracle运行性能会有一些差异，这时我们就需要做一个优化调整。</span><br><span class="line"></span><br><span class="line">Oracle优化这个课题较大，可分为四大类：</span><br><span class="line">       》主机性能</span><br><span class="line">       》内存使用性能</span><br><span class="line">       》网络传输性能</span><br><span class="line">       》SQL语句执行性能【程序员】——针对sql语句</span><br></pre></td></tr></table></figure>

<h2 id="12-1、-尽量少用-IN-操作符"><a href="#12-1、-尽量少用-IN-操作符" class="headerlink" title="12.1、 尽量少用 IN 操作符"></a>12.1、 尽量少用 IN 操作符</h2><p>​    基本上所有的 IN 操作符都可以用 EXISTS 代替， 在选择 IN 或 EXIST 操作时，要根据主子表数据量大小来具体考虑</p>
<h2 id="12-2、-尽量用-NOT-EXISTS-或者外连接替代-NOT-IN-操作符"><a href="#12-2、-尽量用-NOT-EXISTS-或者外连接替代-NOT-IN-操作符" class="headerlink" title="12.2、 尽量用 NOT EXISTS 或者外连接替代 NOT IN 操作符"></a>12.2、 尽量用 NOT EXISTS 或者外连接替代 NOT IN 操作符</h2><p>​    因为 NOT IN 不能应用表的索引</p>
<h2 id="12-3、-尽量不用“-lt-gt-”或者“-”操作符"><a href="#12-3、-尽量不用“-lt-gt-”或者“-”操作符" class="headerlink" title="12.3、 尽量不用“&lt;&gt;”或者“!=”操作符"></a>12.3、 尽量不用“&lt;&gt;”或者“!=”操作符</h2><p>​    不等于操作符是永远不会用到索引的，因此对它的处理只会产生全表扫描。 比如： a&lt;&gt;0改为 a&gt;0 or a&lt;0</p>
<h2 id="12-4、-在设计表时，-把索引列设置为-NOT-NULL"><a href="#12-4、-在设计表时，-把索引列设置为-NOT-NULL" class="headerlink" title="12.4、 在设计表时， 把索引列设置为 NOT NULL"></a>12.4、 在设计表时， 把索引列设置为 NOT NULL</h2><p>​    判断字段是否为空一般是不会应用索引的，因为 B 树索引是不索引空值的。</p>
<h2 id="12-5、-尽量不用通配符“-”或者“-”作为查询字符串的第一个字符"><a href="#12-5、-尽量不用通配符“-”或者“-”作为查询字符串的第一个字符" class="headerlink" title="12.5、 尽量不用通配符“%”或者“_”作为查询字符串的第一个字符"></a>12.5、 尽量不用通配符“%”或者“_”作为查询字符串的第一个字符</h2><p>​    当通配符“%”或者“_”作为查询字符串的第一个字符时，索引不会被使用。比如用 T 表中column1 LIKE ‘%5400%‘这个条件会产生全表扫描，如果改成 column1 ‘X5400%’ OR column1 like ‘B5400%‟ 则会利用 column1 的索引进行两个范围的查询，性能肯定大大提高。</p>
<h2 id="12-6、-Where-子句中避免在索引列上使用计算"><a href="#12-6、-Where-子句中避免在索引列上使用计算" class="headerlink" title="12.6、 Where 子句中避免在索引列上使用计算"></a>12.6、 Where 子句中避免在索引列上使用计算</h2><p>​    如果索引不是基于函数的，那么当在 where 子句中对索引列使用函数时，索引不再起作用。因此 where 子句中避免在索引列上使用计算。</p>
<p>比如：</p>
<p>substr(no,1,4)=’5400’，</p>
<p>优化处理： no like  ‘5400%’ </p>
<p>trunc(hiredate)=trunc(sysdate) ， </p>
<p>优 化 处 理 ： hiredate &gt;=trunc(sysdate) and hiredate&lt;trunc(sysdate+1)</p>
<h2 id="12-7、-用“-gt-”替代“-gt-”"><a href="#12-7、-用“-gt-”替代“-gt-”" class="headerlink" title="12.7、 用“&gt;=”替代“&gt;”"></a>12.7、 用“&gt;=”替代“&gt;”</h2><p>​    大于或小于操作符一般情况下是不用调整的，因为它有索引就会采用索引查找，但有的情况下可以对它进行优化，如一个表有 100 万记录，一个数值型字段 A， 30 万记录的 A=0， 30 万记录的 A=1， 39 万记录的 A=2， 1 万记录的 A=3。那么执行 A&gt;2 与A&gt;=3 的效果就有很大的区别了，因为 A&gt;2 时 ORACLE 会先找出为 2 的记录索引再进行比较，而 A&gt;=3 时 ORACLE 则直接找到=3 的记录索引。</p>
<h2 id="12-8、-利用-SGA-共享池，避开-parse-阶段"><a href="#12-8、-利用-SGA-共享池，避开-parse-阶段" class="headerlink" title="12.8、 利用 SGA 共享池，避开 parse 阶段"></a>12.8、 利用 SGA 共享池，避开 parse 阶段</h2><p>同一功能同一性能不同写法 SQL 的影响</p>
<p>如一个 SQL </p>
<p>A 程序员写的为：select * from zl_yhjbqk</p>
<p>B 程序员写的为：select * from dlyx.zl_yhjbqk（带表所有者的前缀）</p>
<p>C 程序员写的为：select * from DLYX.ZLYHJBQK（大写表名）</p>
<p>D 程序员写的为：Select * from DLYX.ZLYHJBQK（中间多了空格）</p>
<p>​    以上四个 SQL 在 ORACLE 分析整理之后产生的结果及执行的时间是一样的，但是从ORACLE 共享内存 SGA 的原理，可以得出 ORACLE 对每个 SQL 都会对其进行一次分析，并且占用共享内存，如果将 SQL 的字符串及格式写得完全相同则 ORACLE 只会分析一次，共享内存也只会留下一次的分析结果，这不仅可以减少分析 SQL 的时间，而且可以减少共<br>享内存重复的信息， ORACLE 也可以准确统计 SQL 的执行频率。</p>
<p>​    <strong>不同区域出现的相同的 Sql 语句要保证查询字符完全相同， 建议经常使用变量来代替常量，以尽量使用重复 sql 代码， 以利用 SGA 共享池， 避开 parse 阶段，防止相同的 Sql 语句被多次分析，提高执行速度。因此使用存储过程，是一种很有效的提高 share pool 共享率，跳过 parse 阶段，提高效率的办法。</strong></p>
<h2 id="12-9、-WHERE-后面的条件顺序要求"><a href="#12-9、-WHERE-后面的条件顺序要求" class="headerlink" title="12.9、 WHERE 后面的条件顺序要求"></a>12.9、 WHERE 后面的条件顺序要求</h2><p>WHERE 后面的条件， 表连接语句写在最前， 可以过滤掉最大数量记录的条件居后。</p>
<p>比如：</p>
<p>Select * from zl_yhjbqk where dy_dj = ‘1KV 以下’ and xh_bz=1</p>
<p>Select * from zl_yhjbqk where xh_bz=1 and dy_dj = ‘1KV 以下’</p>
<p>​    以上两个 SQL 中 dy_dj（电压等级）及 xh_bz（销户标志）两个字段都没进行索引，所以执行的时候都是全表扫描，第一条SQL的dy_dj = ‘1KV以下’条件在记录集内比率为99%，而 xh_bz=1 的比率只为 0.5%，在进行第一条 SQL 的时候 99%条记录都进行 dy_dj 及 xh_bz的比较，而在进行第二条 SQL 的时候 0.5%条记录都进行 dy_dj 及 xh_bz 的比较，以此可以得出第二条 SQL 的 CPU 占用率明显比第一条低。</p>
<h2 id="12-10、-使用表的别名，并将之作为每列的前缀"><a href="#12-10、-使用表的别名，并将之作为每列的前缀" class="headerlink" title="12.10、 使用表的别名，并将之作为每列的前缀"></a>12.10、 使用表的别名，并将之作为每列的前缀</h2><p>​    当在 Sql 语句中连接多个表时，使用表的别名，并将之作为每列的前缀。这样可以减少解析时间</p>
<h2 id="12-11、-进行了显式或隐式的运算的字段不能进行索引"><a href="#12-11、-进行了显式或隐式的运算的字段不能进行索引" class="headerlink" title="12.11、 进行了显式或隐式的运算的字段不能进行索引"></a>12.11、 进行了显式或隐式的运算的字段不能进行索引</h2><p>比如：</p>
<p>ss_df+20&gt;50，优化处理： ss_df&gt;30</p>
<p>’X‘||hbs_bh&gt;’X5400021452‘，优化处理： hbs_bh&gt;’5400021542‘</p>
<p>sk_rq+5=sysdate，优化处理： sk_rq=sysdate-5</p>
<p>hbs_bh=5401002554，优化处理： hbs_bh=‟ 5401002554‟，注：此条件对 hbs_bh 进行隐式的 to_number 转换，因为 hbs_bh 字段是字符型。</p>
<h2 id="12-12、-用-UNION-ALL-代替-UNION"><a href="#12-12、-用-UNION-ALL-代替-UNION" class="headerlink" title="12.12、 用 UNION ALL 代替 UNION"></a>12.12、 用 UNION ALL 代替 UNION</h2><p>​    UNION 是最常用的集操作，使多个记录集联结成为单个集，对返回的数据行有唯一性要求，所以 oracle 就需要进行 SORT UNIQUE 操作（与使用 distinct 时操作类似），如果结果集又比较大，则操作会比较慢；</p>
<p>​    UNION ALL 操作不排除重复记录行，所以会快很多，如果数据本身重复行存在可能性较小时，用 union all 会比用 union 效率高很多！</p>
<h2 id="12-13、其他操作"><a href="#12-13、其他操作" class="headerlink" title="12.13、其他操作"></a>12.13、其他操作</h2><p>尽量使用 packages： Packages 在第一次调用时能将整个包 load 进内存，对提高性能有帮助。</p>
<p>尽量使用 cached sequences 来生成 primary key ：提高主键生成速度和使用性能。</p>
<p>很好地利用空间：如用 VARCHAR2 数据类型代替 CHAR 等</p>
<p>使用 Sql 优化工具： sqlexpert； toad； explain-table； PL/SQL； OEM</p>
<h2 id="12-14、-通过改变-oracle-的-SGA-的大小"><a href="#12-14、-通过改变-oracle-的-SGA-的大小" class="headerlink" title="12.14、 通过改变 oracle 的 SGA 的大小"></a>12.14、 通过改变 oracle 的 SGA 的大小</h2><p>SGA：数据库的系统全局区。</p>
<p>SGA 主要由三部分构成：共享池、数据缓冲区、日志缓冲区</p>
<p>1、 共享池又由两部分构成：共享 SQL 区和数据字典缓冲区。共享 SQL 区专门存放用户 SQL 命令， oracle 使用最近最少使用等优先级算法来更新覆盖；数据字典缓冲区（library cache）存放数据库运行的动态信息。数据库运行一段时间后，<br>DBA 需要查看这些内存区域的命中率以从数据库角度对数据库性能调优。通过执行下述语句查看：</p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">select</span> (<span class="hljs-keyword">sum</span>(pins - reloads)) / <span class="hljs-keyword">sum</span>(pins) <span class="hljs-string">"Lib Cache"</span> <span class="hljs-keyword">from</span> v$librarycache;</span><br></pre></td></tr></table></figure>

<p>–查看共享 SQL 区的重用率，最好在 90％以上，否则需要增加共享池的大小。</p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">select</span> (<span class="hljs-keyword">sum</span>(gets - getmisses - <span class="hljs-keyword">usage</span> - <span class="hljs-keyword">fixED</span>)) / <span class="hljs-keyword">sum</span>(gets) <span class="hljs-string">"Row Cache"</span> <span class="hljs-keyword">from</span> v$rowcache;</span><br></pre></td></tr></table></figure>

<p>–查看数据字典缓冲区的命中率，最好在 90％以上，否则需要增加共享池的大小。<br>2、 数据缓冲区：存放 sql 运行结果抓取到的 data block；</p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">name</span>, <span class="hljs-keyword">value</span> <span class="hljs-keyword">FROM</span> v$sysstat <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">name</span> <span class="hljs-keyword">IN</span> (<span class="hljs-string">'db block gets'</span>, <span class="hljs-string">'consistent gets'</span>,<span class="hljs-string">'physical reads'</span>);</span><br></pre></td></tr></table></figure>

<p>–查看数据库数据缓冲区的使用情况。查询出来的结果可以计算出来数据缓冲区的使用命中率＝1 - ( physical reads / (db block gets + consistent gets) )。命中率应该在 90％以上，否则需要增加数据缓冲区的大小。</p>
<p>3、 日志缓冲区：存放数据库运行生成的日志。</p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">select</span> <span class="hljs-keyword">name</span>,<span class="hljs-keyword">value</span> <span class="hljs-keyword">from</span> v$sysstat <span class="hljs-keyword">where</span> <span class="hljs-keyword">name</span> <span class="hljs-keyword">in</span> (<span class="hljs-string">'redo entries'</span>,<span class="hljs-string">'redo log space requests'</span>);</span><br></pre></td></tr></table></figure>

<p>–查看日志缓冲区的使用情况。查询出的结果可以计算出日志缓冲区的申请失败率：申请失败率＝requests/entries，申请失败率应该接近于 0，否则说明日志缓冲区开设太小，需要增加 ORACLE 数据库的日志缓冲区 。</p>
<h1 id="13-序列、同义词"><a href="#13-序列、同义词" class="headerlink" title="13.序列、同义词"></a>13.序列、同义词</h1><h2 id="13-1-序列"><a href="#13-1-序列" class="headerlink" title="13.1 序列"></a>13.1 序列</h2><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">/*</span></span><br><span class="line"><span class="hljs-comment">  1.什么是序列【Sequence】 *****</span></span><br><span class="line"><span class="hljs-comment">  	①类似于MySQL中的auto_increment自动增长机制，但Oracle中无auto_increment机制 ***</span></span><br><span class="line"><span class="hljs-comment"> 	②是oracle提供的一个产生唯一数值型值的机制 ***</span></span><br><span class="line"><span class="hljs-comment">  	③通常用于表的主健值***</span></span><br><span class="line"><span class="hljs-comment">  	④序列只能保证唯一，不能保证连续</span></span><br><span class="line"><span class="hljs-comment">       声明：oracle中，只有rownum永远保持从1开始，且继续</span></span><br><span class="line"><span class="hljs-comment">  	⑤序列值，可放于内存，取之较快</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">  2.为什么要用序列</span></span><br><span class="line"><span class="hljs-comment">  	①以前我们为主健设置值，需要人工设置值，容易出错</span></span><br><span class="line"><span class="hljs-comment">  	②以前每张表的主健值，是独立的，不能共享</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">  3.为什么oracle不直接用rownum做主健呢？</span></span><br><span class="line"><span class="hljs-comment">  	rownum=1这条记录不能永远唯一表示SMITH这个用户，但主键=1确可以永远唯一表示SMITH这个用户</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">   4.语法</span></span><br><span class="line"><span class="hljs-comment">    CREATE  SEQUENCE sq_name    --创建序列</span></span><br><span class="line"><span class="hljs-comment">    [start with n] [increment by n][ maxvalue n|nomaxvalue][cycle|nocycle][cache  n|nocache] ;</span></span><br><span class="line"><span class="hljs-comment">    sq_name.currval --当前序号 </span></span><br><span class="line"><span class="hljs-comment">    sq_name.nextval --下一个序号 </span></span><br><span class="line"><span class="hljs-comment">    DROP   SEQUENCE  sq_name; --删除序列</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">	5.常见问题</span></span><br><span class="line"><span class="hljs-comment">      删除表，会影响序列吗？你无法做insert操作</span></span><br><span class="line"><span class="hljs-comment">      删除序列，会影响表吗？表真正亡，序列亡</span></span><br><span class="line"><span class="hljs-comment"></span></span><br><span class="line"><span class="hljs-comment">*/</span></span><br><span class="line"><span class="hljs-comment">--1.为emp表的empno字段，创建序列emp_empno_seq，create sequence 序列名</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--2.删除序列emp_empno_seq，drop sequence 序列名</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--3.查询emp_empno_seq序列的当前值currval和下一个值nextval，第一次使用序列时，必须选用：序列名.nextval</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--4.使用序列，向emp表插入记录，empno字段使用序列值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--5.修改emp_empno_seq序列的increment by属性为20，默认start with是1，alter sequence 序列名</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--6.修改emp_empno_seq序列的的increment by属性为5</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--7.修改emp_empno_seq序列的start with属性，行吗:注意已经启动的序列改不了</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--8.有了序列后，还能为主健手工设置值吗？可以设置</span></span><br></pre></td></tr></table></figure>

<h2 id="13-2-同义词"><a href="#13-2-同义词" class="headerlink" title="13.2 同义词"></a>13.2 同义词</h2><p>1,.什么是同义词</p>
<p>同义词（Synonym）是数据库对象的一个别名，Oracle 可以为表、视图、序列、过程、函数、程序包等指定一个别名。</p>
<p>2.作用</p>
<p>①缩短对象名字的长度</p>
<p>②方便访问其它用户的对象</p>
<p>③为用户简化sql语句</p>
<p>3.同义词有两种类型：</p>
<p>1、私有同义词：拥有 CREATE SYNONYM 权限的用户（包括非管理员用户）即可创建私有同义词，创建的私有同义词只能由当前用户使用。</p>
<p>2、公有同义词：系统管理员可以创建公有同义词，公有同义词可以被所有用户访问。</p>
<p>语法结构</p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">create</span> [<span class="hljs-keyword">or</span> <span class="hljs-keyword">replace</span>] [<span class="hljs-keyword">public</span>] <span class="hljs-keyword">synonym</span> synonym_name <span class="hljs-keyword">for</span> [schema.]object_name</span><br></pre></td></tr></table></figure>

<p>梨子：创建一个用户 xiaohei，该用户拥有 connect 角色和 resource角色。为 scott用户的 emp表创建同义词，并通过同义词访问该 emp表。</p>
<p>4.如何使用</p>
<figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">--1.创建与salgrade表对应的同义词，create synonym 同义词 for 表名/视图/其它对象</span></span><br><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">synonym</span> e <span class="hljs-keyword">for</span> salgrade;</span><br><span class="line"><span class="hljs-keyword">create</span> <span class="hljs-keyword">synonym</span> ev5 <span class="hljs-keyword">for</span> emp_view_5;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--以sys身份授予scott普通用户create synonym权限</span></span><br><span class="line"><span class="hljs-keyword">grant</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">synonym</span> <span class="hljs-keyword">to</span> scott;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--以sys身份从scott普通用户撤销create synonym权限</span></span><br><span class="line"><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">synonym</span> <span class="hljs-keyword">from</span> scott;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--2.使用同义词操作salgrade表</span></span><br><span class="line"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> s;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">--3.删除同义词</span></span><br><span class="line"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">synonym</span> ev5;</span><br></pre></td></tr></table></figure>

<p>5.常见问题</p>
<p>①删除同义词，会影响基表吗？ 不会影响基表</p>
<p>②删除基表，会影响同义词吗？ 会影响同义词</p>
<h1 id="14-练习"><a href="#14-练习" class="headerlink" title="14.练习"></a>14.练习</h1><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 1:创建一个包含 1982 年 3 月 31 日以后入职的所有雇员的视图</span></span><br><span class="line"><span class="hljs-comment">-- 2：创建一个包含佣金高于其薪金的雇员视图</span></span><br><span class="line"><span class="hljs-comment">-- 3：创建一个包含所有雇员的雇员编号、雇员名称、部门名称和薪金的视图</span></span><br><span class="line"><span class="hljs-comment">-- 4：创建一个有手下的雇员的视图，包括雇员编号，雇员名称</span></span><br><span class="line"><span class="hljs-comment">-- 5：创建一个包含各种工作的薪金总和的视图</span></span><br><span class="line"><span class="hljs-comment">-- 8： 创建一个序列，从 50 开始，每次增加 10</span></span><br><span class="line"><span class="hljs-comment">-- 9：用上面的序列给 dept 表加一条数据</span></span><br><span class="line"><span class="hljs-comment">-- 9：为 emp 表创建一个同义词 emp1</span></span><br><span class="line"><span class="hljs-comment">-- 10：在上面创建的同义词中插入值，并观察对基表的影响</span></span><br><span class="line"><span class="hljs-comment">-- 11：在 emp 表的 empno 字段上创建一个索引，并检查是否可以创建</span></span><br><span class="line"><span class="hljs-comment">-- 12：在 emp 表的 sal 上创建一个索引</span></span><br><span class="line"><span class="hljs-comment">-- 13：列出您所创建的全部视图、同义词、序列和索引。</span></span><br><span class="line"><span class="hljs-comment">-- 14：删除你所创建的任何视图的基表，然后尝试查询视图，并观察查询的输出情况</span></span><br><span class="line"><span class="hljs-comment">-- 15：删除您创建的所有视图、同义词、序列和索引。</span></span><br></pre></td></tr></table></figure>


        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2019/10/11/3-Oralce/">
                <span class="level-item">3-Oracle</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>


</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered" style="flex-shrink: 1">
                <div>
                    
                    <figure class="image is-128x128 has-mb-6">
                        <img class="" src="/images/brown.jpg" alt="BrownQi">
                    </figure>
                    
                    <p class="is-size-4 is-block">
                        BrownQi
                    </p>
                    
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>江苏  南京</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        6
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        1
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        3
                    </p>
                </div>
            </div>
        </nav>
        
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/BrownQi" target="_blank">
                关注我</a>
        </div>
        
        
        
        <div class="level is-mobile">
            
            <a class="level-item button is-white is-marginless" target="_blank"
                title="Github" href="https://github.com/BrownQi">
                
                <i class="fab fa-github"></i>
                
            </a>
            
        </div>
        
    </div>
</div>
    
        
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            链接
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://www.brownqi.cn" target="_blank">
                    <span class="level-left">
                        <span class="level-item">BrownQi&#39;s Blog</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.brownqi.cn</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>

    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/oracle/">
            <span class="level-start">
                <span class="level-item">oracle</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/network/" style="font-size: 10px;">network</a> <a href="/tags/oracle练习/" style="font-size: 10px;">oracle练习</a>
    </div>
</div>
    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/10/11/4-Oralce/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="4-Oracle">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T20:22:46.000Z">2019-10-11</time></div>
                    <a href="/2019/10/11/4-Oralce/" class="title has-link-black-ter is-size-6 has-text-weight-normal">4-Oracle</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/11/3-Oralce/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="3-Oracle">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T20:22:20.000Z">2019-10-11</time></div>
                    <a href="/2019/10/11/3-Oralce/" class="title has-link-black-ter is-size-6 has-text-weight-normal">3-Oracle</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/10/Socket/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Socket">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T09:52:48.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Socket/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Socket</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/09/Downloads/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Downloads">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-09T07:02:46.000Z">2019-10-09</time></div>
                    <a href="/2019/10/09/Downloads/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Downloads</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/08/hexo-blog/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="使用hexo搭建个人博客">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-08T07:41:43.000Z">2019-10-08</time></div>
                    <a href="/2019/10/08/hexo-blog/" class="title has-link-black-ter is-size-6 has-text-weight-normal">使用hexo搭建个人博客</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">十月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/network/">
                        <span class="tag">network</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/oracle练习/">
                        <span class="tag">oracle练习</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        <div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/2019/10/11/4-Oralce/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="4-Oracle">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T20:22:46.000Z">2019-10-11</time></div>
                    <a href="/2019/10/11/4-Oralce/" class="title has-link-black-ter is-size-6 has-text-weight-normal">4-Oracle</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/11/3-Oralce/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="3-Oracle">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T20:22:20.000Z">2019-10-11</time></div>
                    <a href="/2019/10/11/3-Oralce/" class="title has-link-black-ter is-size-6 has-text-weight-normal">3-Oracle</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/10/Socket/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Socket">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T09:52:48.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Socket/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Socket</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/09/Downloads/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Downloads">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-09T07:02:46.000Z">2019-10-09</time></div>
                    <a href="/2019/10/09/Downloads/" class="title has-link-black-ter is-size-6 has-text-weight-normal">Downloads</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/08/hexo-blog/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="使用hexo搭建个人博客">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-08T07:41:43.000Z">2019-10-08</time></div>
                    <a href="/2019/10/08/hexo-blog/" class="title has-link-black-ter is-size-6 has-text-weight-normal">使用hexo搭建个人博客</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">十月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <div class="field is-grouped is-grouped-multiline">
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/hexo/">
                        <span class="tag">hexo</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/network/">
                        <span class="tag">network</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
                <div class="control">
                    <a class="tags has-addons" href="/tags/oracle练习/">
                        <span class="tag">oracle练习</span>
                        <span class="tag is-grey">1</span>
                    </a>
                </div>
                
            </div>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/title.png" alt="4-Oracle" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 BrownQi&nbsp;
                Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a
                        href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                共<span id="busuanzi_value_site_uv">0</span>个访客
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Creative Commons" href="https://creativecommons.org/">
                        
                        <i class="fab fa-creative-commons"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/">
                        
                        <i class="fab fa-creative-commons-by"></i>
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>

<script>
var IcarusThemeSettings = {
    article: {
        highlight: {
            clipboard: true,
            fold: 'unfolded'
        }
    }
};
</script>


    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>



    
    
<script src="/js/animation.js"></script>

    
    
<script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
<script src="/js/gallery.js" defer></script>

    
    
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>

    
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>
    
    
<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>

    
    
    
    
    
    
    
    
    
    
    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>